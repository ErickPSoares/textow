
RewriteEngine On

# Exceções manuais para arquivos específicos
RewriteCond %{REQUEST_URI} !^/public/

# Evita redirecionar o próprio index.php
RewriteCond %{REQUEST_URI} !^/index\.php$

# NÃO redireciona se o arquivo físico existir
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Bloqueia acesso direto a qualquer .php exceto index.php
<FilesMatch "^(?!index\.php$).+\.php$">
    Require all denied
</FilesMatch>